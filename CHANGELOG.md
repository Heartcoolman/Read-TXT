# 更新日志

本文档记录 TXT 阅读器的所有重要更改。

格式基于 [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)，
版本号遵循 [语义化版本](https://semver.org/lang/zh-CN/)。

## [未发布]

### 计划中
- EPUB/MOBI 格式支持
- 云端同步阅读进度
- 笔记导出功能（PDF/Markdown）
- 更多主题和字体选项
- 阅读统计功能
- 夜间模式自动切换
- iCloud 备份
- iPad 多窗口支持

## [1.0.0] - 2025-10-21

### 首次发布 🎉

#### 新增功能

##### WebDAV 在线阅读
- ✅ 连接 WebDAV 服务器（坚果云、Nextcloud 等）
- ✅ 账号密码安全保存在系统钥匙串
- ✅ 在线浏览目录和文件
- ✅ 点击文件即可在线打开
- ✅ 流式读取，支持大文件

##### 智能编码识别
- ✅ 自动识别 10+ 种编码
  - UTF-8/UTF-16/UTF-32（含 BOM 检测）
  - GB18030/GBK（简体中文）
  - Big5（繁体中文）
  - Shift-JIS（日文）
  - ISO-8859-1/Windows-1252（西欧）
  - KOI8-R（俄文）
  - EUC-KR（韩文）
- ✅ 编码识别失败时可手动选择
- ✅ 实时预览不同编码的效果
- ✅ 记住每本书的编码选择
- ✅ 自动处理 BOM
- ✅ 统一换行符

##### 阅读体验
- ✅ **双模式**：分页模式和滚动模式
- ✅ **分页模式**：
  - 基于 CoreText 精确分页
  - 点击左右区域翻页
  - 滑动手势翻页
  - 平滑的翻页动画
- ✅ **滚动模式**：
  - 流畅的长文本滚动
  - 虚拟化列表优化性能
- ✅ **自定义样式**：
  - 字体选择（8+ 种字体）
  - 字号调节（12-36）
  - 行距调节（0-20）
  - 段落间距调节（0-30）
  - 页边距调节（水平/垂直）
- ✅ **主题系统**：
  - 明亮模式
  - 暗黑模式
  - 护眼色模式
  - 自动跟随系统

##### 章节和目录
- ✅ 自动识别章节
  - 支持"第X章/卷/节/回"等中文格式
  - 支持 "Chapter X" 等英文格式
  - 支持数字编号格式
- ✅ 目录导航
- ✅ 章节跳转
- ✅ 当前章节高亮

##### 阅读进度
- ✅ 自动保存阅读位置
- ✅ 显示阅读百分比
- ✅ 进度条可视化
- ✅ 显示当前页/总页数
- ✅ 预计剩余阅读时间
- ✅ 统计总阅读时长

##### 搜索功能
- ✅ 全文搜索
- ✅ 实时搜索结果
- ✅ 显示搜索结果所在章节
- ✅ 显示上下文摘要
- ✅ 点击结果跳转到对应位置
- ✅ 搜索结果计数

##### 书签和标注
- ✅ 快速添加书签
- ✅ 高亮文本
- ✅ 添加笔记
- ✅ 多种高亮颜色
- ✅ 书签列表查看
- ✅ 书签跳转
- ✅ 书签管理（删除）

##### iPad 特性
- ✅ 分屏多任务支持
- ✅ 外接键盘快捷键：
  - 空格/方向键：翻页
  - ⌘F：搜索
  - ⌘T：目录
  - ⌘B：书签
  - ⌘D：添加书签
  - ⌘,：设置
  - ⌘W：关闭阅读器
- ✅ 横竖屏自适应
- ✅ 支持所有 iPad 尺寸
- ✅ Apple Pencil 基础支持

##### 辅助功能
- ✅ 系统 TTS 朗读
- ✅ VoiceOver 支持
- ✅ 动态字体支持
- ✅ 完整的无障碍标签
- ✅ 键盘导航
- ✅ 触觉反馈

##### 数据管理
- ✅ 本地书库
- ✅ 最近阅读列表
- ✅ 书籍信息展示
- ✅ SwiftData 数据持久化
- ✅ Keychain 安全存储

##### 技术特性
- ✅ SwiftUI 构建
- ✅ iOS 17+ 支持（针对 iOS 26 优化）
- ✅ Swift Concurrency (async/await)
- ✅ MVVM 架构
- ✅ 流式文件读取
- ✅ 内存优化
- ✅ 性能优化

##### CI/CD
- ✅ GitHub Actions 自动构建
- ✅ 自动生成未签名 IPA
- ✅ 自动创建 Release
- ✅ 构建产物上传

### 已知问题
- Apple Pencil 批注功能为基础实现，待完善
- 暂不支持云端同步
- 暂不支持 EPUB/MOBI 格式

## 版本说明

### 版本号格式
- **主版本号**: 重大更新，可能包含不兼容的改动
- **次版本号**: 新功能，向后兼容
- **修订号**: Bug 修复和小改进

### 分类说明
- `新增`: 新功能
- `变更`: 现有功能的改动
- `弃用`: 即将移除的功能
- `移除`: 已移除的功能
- `修复`: Bug 修复
- `安全`: 安全相关的改动

---

**感谢使用 TXT 阅读器！** 📚

